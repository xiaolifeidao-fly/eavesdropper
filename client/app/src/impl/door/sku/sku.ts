require('module-alias/register');

import {  InvokeType, Protocols } from "@eleapi/base";
import { MbShopDetailMonitorChain } from "@src/door/monitor/mb/sku/md.sku.info.monitor";
import { MbShopApi } from "@eleapi/door/shop/mb.shop";
import { MbSkuApi } from "@eleapi/door/sku/mb.sku";

import { MbEngine } from "@src/door/mb/mb.engine";


export class MbSkuApiImpl extends MbSkuApi { 
    

    @InvokeType(Protocols.INVOKE)
    async findMbSkuInfo(url: string) {
        const engine = new MbEngine(1);
        try{
            const monitorChain = new MbShopDetailMonitorChain();
            const page = await engine.init();
            if(!page){ 
                return;
            }
            return await engine.openWaitMonitorChain(page, url, monitorChain);
        }finally{
            await engine.closePage();
        }  
    }


}

